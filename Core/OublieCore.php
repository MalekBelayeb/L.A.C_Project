<?phpinclude "../Config.php";class OublieCore{    private $token;    private $mail;    /**     * @return mixed     */    public function getMail()    {        return $this->mail;    }    /**     * @param mixed $mail     */    public function setMail($mail)    {        $this->mail = $mail;    }    /**     * @return mixed     */    public function getUser()    {        return $this->user;    }    /**     * @param mixed $user     */    public function setUser($user)    {        $this->user = $user;    }    private $user;    function getToken()    {        return $this->token;    }    function setToken($t)    {        $this->token=$t;    }function CreerCle(){$a=uniqid();$b=uniqid();$c=uniqid();$Token=$a.$b.$c;$requete=Connexion::getConnexion()->prepare("INSERT INTO token(token) VALUES(:TOKEN)");$requete->bindValue(':TOKEN',$Token,PDO::PARAM_STR);$requete->execute();return $Token;}function getCle(){}function verif_cle(){$sql=Connexion::getConnexion()->prepare("select token from token ");$sql->execute();while($result=$sql->fetch(PDO::FETCH_ASSOC)){    if (($result['token']==$this->token))        {            return true;        }}}function envoiMail(){    $Destinataire='malek.belayeb@esprit.tn';    $sujet='Renitialisation du mot de passe';    $Code=$this->CreerCle();    $message='Bonjour, '. $this->user .' http://localhost/AvenirCulturel/Views/user-profile/book-shelf/DonnesProfile.php?Token='.$Code."&"."id=".$this->user;    $entete='Librairie Avenir Culturel';    if(mail($Destinataire,$sujet,$message,$entete)==true)    {    }}}$t=new OublieCore();    function CompteExiste($username,$adresse)    {        $c=Connexion::getConnexion();        $sql="select * from compte WHERE EMAIL='$adresse' AND  LOGIN='$username' ";        try{            $liste=$c->query($sql);            if( $liste->rowCount()!=0)            {                return true;            }            else            {                return false;            }        }catch (PDOException $e)        {            die( "Echec de connexion".$e->getMessage());        }    }if(!empty($_GET['username']) and !empty($_GET['email'])){if(CompteExiste($_GET['username'],$_GET['email'])){echo 1;if(isset($_POST['lost_pwd_submit'])){$t->setMail($_GET['email']);$t->setUser($_GET['username']);$t->envoiMail();}}else{echo 0;}}